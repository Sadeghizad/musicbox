<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù‡Ø¯ÛŒÙ‡â€ŒØ§ÛŒ ÙØ±Ø§ØªØ± Ø§Ø² ØªØµÙˆÛŒØ± | Ø·Ø±Ø§Ø­ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ</title>
<style>
  :root { 
      --dk-red: #ef394e; 
      --dk-red-hover: #d32f2f;
      --dk-grey: #f7f9fc; 
      --dk-text: #2c3e50; 
      --dk-blue: #19bfd3; 
      --white: #ffffff;
      --shadow: 0 10px 30px rgba(0,0,0,0.08);
  }
  
  * { box-sizing: border-box; outline: none; font-family: 'IRANSans', 'Tahoma', sans-serif; }
  html { scroll-behavior: smooth; }
  body { background: var(--white); color: var(--dk-text); margin: 0; padding: 0; line-height: 1.6; }
  
  /* --- NAVBAR --- */
  .navbar { position: sticky; top: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); padding: 15px 0; }
  .nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
  .logo { font-weight: 900; font-size: 24px; color: var(--dk-red); text-decoration: none; }
  .nav-links { display: flex; gap: 25px; }
  .nav-links a { text-decoration: none; color: var(--dk-text); font-weight: 500; font-size: 14px; transition: 0.2s; cursor: pointer; }
  .nav-links a:hover { color: var(--dk-red); }
  .cta-small { background: var(--dk-red); color: white !important; padding: 8px 20px; border-radius: 50px; }

  /* --- HERO SECTION --- */
  .hero-section { height: 90vh; min-height: 600px; display: flex; align-items: center; justify-content: center; text-align: center; background: radial-gradient(circle at center, #fff5f6 0%, #fff 70%); padding: 20px; }
  .hero-content { max-width: 800px; animation: fadeIn 1s ease-out; }
  h1.main-title { font-size: 3rem; margin-bottom: 20px; line-height: 1.4; color: #1a1a1a; }
  .highlight-text { color: var(--dk-red); }
  .sub-title { font-size: 1.5rem; color: #666; display: flex; justify-content: center; gap: 8px; align-items: center; flex-wrap: wrap; }
  .animated-word { font-weight: bold; color: var(--dk-text); border-bottom: 2px solid var(--dk-blue); min-width: 100px; text-align: center; transition: all 0.3s; }
  .scroll-down-btn { margin-top: 50px; display: inline-block; padding: 15px 40px; background: var(--dk-text); color: white; text-decoration: none; border-radius: 50px; font-weight: bold; transition: 0.3s; box-shadow: var(--shadow); }
  .scroll-down-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); }

  /* --- AI ADVISOR --- */
  .ai-section { background: var(--dk-grey); padding: 80px 20px; text-align: center; }
  .section-title { font-size: 2rem; margin-bottom: 40px; position: relative; display: inline-block; }
  .section-title::after { content: ''; display: block; width: 60px; height: 4px; background: var(--dk-red); margin: 15px auto 0; border-radius: 2px; }
  
  .ai-card { background: white; max-width: 900px; margin: 0 auto; padding: 40px; border-radius: 20px; box-shadow: var(--shadow); display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center; }
  .ai-text h3 { margin-top: 0; font-size: 1.5rem; }
  .ai-text p { color: #666; margin-bottom: 30px; }
  .quiz-box { display: flex; flex-direction: column; gap: 15px; }
  .quiz-select { padding: 12px; border: 2px solid #eee; border-radius: 8px; font-size: 14px; background: #fff; cursor: pointer; }
  .ai-btn { background: linear-gradient(45deg, var(--dk-blue), #2980b9); color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; }
  .ai-btn:hover { filter: brightness(1.1); }
  
  @media(max-width: 768px) { .ai-card { grid-template-columns: 1fr; } h1.main-title { font-size: 2rem; } }

  /* --- CUSTOMIZER (Integrated) --- */
  .customizer-section { padding: 80px 20px; background: #fff; }
  /* (Styles from previous code adapted here) */
  .builder-container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 380px; gap: 40px; }
  .canvas-area { background: #f4f4f4; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; align-items: center; padding: 20px; box-shadow: inset 0 0 20px rgba(0,0,0,0.03); }
  .canvas-wrapper { width: 100%; max-width: 600px; position: relative; cursor: grab; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border-radius: 4px; }
  .canvas-wrapper:active { cursor: grabbing; }
  #mainCanvas { width: 100%; display: block; }
  
  .controls-area { background: #fff; padding: 25px; border-radius: 12px; border: 1px solid #eee; height: fit-content; position: sticky; top: 100px; }
  .ctrl-group { margin-bottom: 25px; }
  .ctrl-label { display: block; font-weight: bold; margin-bottom: 10px; font-size: 14px; color: #444; }
  
  .opt-chips { display: flex; gap: 8px; flex-wrap: wrap; }
  .chip { padding: 8px 16px; border: 1px solid #ddd; border-radius: 20px; font-size: 13px; cursor: pointer; transition: 0.2s; background: #fff; }
  .chip.active { background: var(--dk-text); color: white; border-color: var(--dk-text); }
  .color-dot { width: 35px; height: 35px; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 0 1px #ddd; cursor: pointer; transition: 0.2s; }
  .color-dot.active { transform: scale(1.1); box-shadow: 0 0 0 2px var(--dk-red); }
  
  .upload-zone { border: 2px dashed #ccc; padding: 20px; text-align: center; border-radius: 8px; cursor: pointer; transition: 0.2s; background: #fafafa; }
  .upload-zone:hover { border-color: var(--dk-blue); background: #f0fbff; }
  .upload-zone.done { border-style: solid; border-color: #4caf50; background: #e8f5e9; }
  
  .tool-row { display: flex; gap: 10px; margin-top: 10px; align-items: center; }
  .icon-btn { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; background: white; }
  .slider-box { flex: 1; display: flex; align-items: center; gap: 10px; font-size: 12px; }
  .slider-box input { width: 100%; }

  .thumbs-row { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: auto; }
  .thumb-item { width: 70px; height: 70px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; overflow: hidden; opacity: 0.7; transition: 0.2s; background: #fff; }
  .thumb-item.active { border-color: var(--dk-red); opacity: 1; transform: translateY(-3px); }
  .thumb-item canvas { width: 100%; height: 100%; object-fit: contain; }

  .final-btn { width: 100%; padding: 18px; background: var(--dk-red); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; margin-top: 20px; }
  .final-btn:hover { background: var(--dk-red-hover); }
  .final-btn:disabled { background: #ddd; cursor: not-allowed; }

  @media(max-width: 900px) { .builder-container { grid-template-columns: 1fr; } .controls-area { position: static; } }

  /* --- REVIEWS --- */
  .reviews-section { padding: 60px 20px; background: var(--dk-text); color: white; overflow: hidden; }
  .reviews-track { display: flex; gap: 30px; overflow-x: auto; padding-bottom: 20px; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; }
  .review-card { min-width: 300px; background: rgba(255,255,255,0.1); padding: 25px; border-radius: 12px; scroll-snap-align: start; border-left: 4px solid var(--dk-red); }
  .review-text { font-style: italic; font-size: 15px; margin-bottom: 15px; line-height: 1.6; }
  .review-meta { font-size: 13px; color: rgba(255,255,255,0.6); }

  /* --- FAQ --- */
  .faq-section { padding: 80px 20px; background: #fff; max-width: 800px; margin: 0 auto; }
  details { margin-bottom: 15px; border: 1px solid #eee; border-radius: 8px; overflow: hidden; }
  summary { padding: 20px; background: #f9f9f9; cursor: pointer; font-weight: bold; list-style: none; position: relative; }
  summary::after { content: '+'; position: absolute; left: 20px; font-size: 20px; color: var(--dk-red); }
  details[open] summary::after { content: '-'; }
  .faq-content { padding: 20px; background: #fff; color: #555; font-size: 14px; }

  /* --- LOADER --- */
  .loader { position: fixed; inset: 0; background: rgba(255,255,255,0.9); z-index: 2000; display: flex; justify-content: center; align-items: center; flex-direction: column; }
  .spinner { width: 50px; height: 50px; border: 5px solid #eee; border-top-color: var(--dk-red); border-radius: 50%; animation: spin 1s linear infinite; }
  @keyframes spin { 100% { transform: rotate(360deg); } }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <div class="nav-container">
        <a href="#" class="logo">Ù…ÙˆØ²ÛŒÚ© Ø¨Ø§Ú©Ø³</a>
        <div class="nav-links">
            <a href="#hero">Ø®Ø§Ù†Ù‡</a>
            <a href="#customizer">Ø·Ø±Ø§Ø­ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</a>
            <a href="#reviews">Ù†Ø¸Ø±Ø§Øª</a>
            <a href="#faq">Ø³ÙˆØ§Ù„Ø§Øª</a>
        </div>
        <a href="#customizer" class="cta-small">Ø´Ø±ÙˆØ¹ Ø·Ø±Ø§Ø­ÛŒ</a>
    </div>
</nav>

<!-- Hero Section -->
<header id="hero" class="hero-section">
    <div class="hero-content">
        <h1 class="main-title">
            Ø§Ø­Ø³Ø§Ø³Ø§ØªØª Ø±Ø§ Ø¨Ø§<br>
            <span class="highlight-text">ØªÙ…Ø§Ù… Ø­ÙˆØ§Ø³ Ù¾Ù†Ø¬â€ŒÚ¯Ø§Ù†Ù‡</span> Ù…Ù†ØªÙ‚Ù„ Ú©Ù†
        </h1>
        <div class="sub-title">
            <span>ÛŒÚ© Ù‡Ø¯ÛŒÙ‡ Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ</span>
            <span class="animated-word" id="changingText">Ø¹Ø´Ù‚Øª</span>
        </div>
        <a href="#customizer" class="scroll-down-btn">Ø®ÙˆØ¯Øª Ø¨Ø³Ø§Ø²Ø´!</a>
    </div>
</header>

<!-- AI Advisor -->
<section id="ai-advisor" class="ai-section">
    <div class="section-title">Ù†Ù…ÛŒâ€ŒØ¯ÙˆÙ†ÛŒ Ú†ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØŸ</div>
    <div class="ai-card">
        <div class="ai-text">
            <h3>Ù…Ø´Ø§ÙˆØ± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø§Ù†ØªØ®Ø§Ø¨ Ù‡Ø¯ÛŒÙ‡</h3>
            <p>Ù…Ø§ Ø¨Ø§ ØªØ­Ù„ÛŒÙ„ Ø´Ø®ØµÛŒØª ÙØ±Ø¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø´Ù…Ø§ØŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ø¬Ù†Ø³ Ùˆ Ø³Ø¨Ú© Ø·Ø±Ø§Ø­ÛŒ Ø±Ø§ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ… ØªØ§ Ù‡Ø¯ÛŒÙ‡â€ŒØ§ÛŒ Ø¨Ø³Ø§Ø²ÛŒØ¯ Ú©Ù‡ Ù‡Ù…ÛŒØ´Ù‡ Ø¯Ø± ÛŒØ§Ø¯Ø´ Ø¨Ù…Ø§Ù†Ø¯.</p>
        </div>
        <div class="quiz-box">
            <select class="quiz-select" id="aiWho">
                <option value="" disabled selected>Ú¯ÛŒØ±Ù†Ø¯Ù‡ Ù‡Ø¯ÛŒÙ‡ Ú©ÛŒØ³ØªØŸ</option>
                <option value="partner">Ù‡Ù…Ø³Ø± / Ù¾Ø§Ø±ØªÙ†Ø± (Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡)</option>
                <option value="friend">Ø¯ÙˆØ³Øª ØµÙ…ÛŒÙ…ÛŒ (Ù…Ø¯Ø±Ù†)</option>
                <option value="parent">Ù¾Ø¯Ø± / Ù…Ø§Ø¯Ø± (Ú©Ù„Ø§Ø³ÛŒÚ©)</option>
                <option value="colleague">Ù‡Ù…Ú©Ø§Ø± / Ù…Ø¯ÛŒØ± (Ø±Ø³Ù…ÛŒ)</option>
            </select>
            <select class="quiz-select" id="aiVibe">
                <option value="" disabled selected>Ú†Ù‡ Ø³Ø¨Ú©ÛŒ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ø¯ØŸ</option>
                <option value="nature">Ø·Ø¨ÛŒØ¹ÛŒ Ùˆ Ú¯Ø±Ù…</option>
                <option value="minimal">Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„ Ùˆ Ø³Ø§Ø¯Ù‡</option>
                <option value="luxury">Ù„ÙˆÚ©Ø³ Ùˆ Ø³Ù†Ú¯ÛŒÙ†</option>
            </select>
            <button class="ai-btn" onclick="applyAiSuggestion()">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ùˆ Ø´Ø±ÙˆØ¹ Ø·Ø±Ø§Ø­ÛŒ âœ¨</button>
        </div>
    </div>
</section>

<!-- Customizer (The App) -->
<section id="customizer" class="customizer-section">
    <div class="builder-container">
        
        <!-- Left: Canvas -->
        <div class="canvas-area">
            <div class="canvas-wrapper">
                <canvas id="mainCanvas"></canvas>
            </div>
            <div class="thumbs-row" id="thumbsContainer"></div>
        </div>

        <!-- Right: Controls -->
        <div class="controls-area">
            <div class="ctrl-group">
                <span class="ctrl-label">Û±. Ø¬Ù†Ø³ Ù…Ø­ØµÙˆÙ„</span>
                <div class="opt-chips" id="typeContainer"></div>
            </div>

            <div class="ctrl-group">
                <span class="ctrl-label">Û². Ø±Ù†Ú¯ / Ù…ØªØ±ÛŒØ§Ù„: <span id="matName" style="font-weight:normal;color:#666"></span></span>
                <div class="opt-chips" id="materialContainer"></div>
            </div>

            <div class="ctrl-group">
                <span class="ctrl-label">Û³. ØªØµÙˆÛŒØ± Ø´Ù…Ø§ (Ø·Ø±Ø­ Ø±ÙˆÛŒ Ù…Ø­ØµÙˆÙ„)</span>
                <div class="upload-zone" id="imgDrop">
                    <div>ğŸ“· Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ±</div>
                    <small style="color:#999;font-size:10px">JPG / PNG</small>
                    <input type="file" id="imgInput" hidden accept="image/*">
                </div>
                
                <div class="tool-row" id="tools" style="display:none; opacity:0.5; pointer-events:none">
                    <div class="icon-btn" id="rotBtn" title="Ú†Ø±Ø®Ø´">â†»</div>
                    <div class="slider-box">
                        <span>ğŸ”</span>
                        <input type="range" id="zoomRange" min="10" max="300" value="100">
                    </div>
                </div>
            </div>

            <div class="ctrl-group">
                <span class="ctrl-label">Û´. ØµØ¯Ø§ÛŒ ÛŒØ§Ø¯Ú¯Ø§Ø±ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</span>
                <div class="upload-zone" id="audioDrop">
                    <div>ğŸµ Ø¢Ù¾Ù„ÙˆØ¯ ØµØ¯Ø§/Ù…ÙˆØ²ÛŒÚ©</div>
                    <small id="audioLabel" style="color:#999;font-size:10px">MP3 (Max 3.9MB)</small>
                    <input type="file" id="audioInput" hidden accept=".mp3">
                </div>
            </div>

            <button id="buyBtn" class="final-btn" disabled>Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</button>
        </div>
    </div>
</section>

<!-- Reviews -->
<section id="reviews" class="reviews-section">
    <div class="nav-container" style="display:block">
        <h2 style="margin-bottom:30px; text-align:center">ØªØ¬Ø±Ø¨Ù‡ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø§Ø² Ø§ÛŒÙ† Ù‡Ø¯ÛŒÙ‡</h2>
        <div class="reviews-track">
            <!-- Review 1 -->
            <div class="review-card">
                <p class="review-text">"Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„Ú¯Ø±Ø¯ Ø§Ø²Ø¯ÙˆØ§Ø¬Ù…ÙˆÙ† Ú¯Ø±ÙØªÙ…. ÙˆÙ‚ØªÛŒ Ø¨Ø§Ø±Ú©Ø¯ Ø±Ùˆ Ø§Ø³Ú©Ù† Ú©Ø±Ø¯ Ùˆ ØµØ¯Ø§ÛŒ Ø®ÙˆØ¯Ù… Ù¾Ø®Ø´ Ø´Ø¯ØŒ Ú¯Ø±ÛŒÙ‡â€ŒØ§Ø´ Ú¯Ø±ÙØª. ÙˆØ§Ù‚Ø¹Ø§ Ù…Ù…Ù†ÙˆÙ†Ù…."</p>
                <div class="review-meta">Ø®Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ: Ù‡Ù…Ø³Ø± | Ø·Ø±Ø­: Ú†ÙˆØ¨ Ú¯Ø±Ø¯Ùˆ</div>
            </div>
            <!-- Review 2 -->
            <div class="review-card">
                <p class="review-text">"Ø®ÛŒÙ„ÛŒ Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¨ÙˆØ¯. ÙÚ©Ø± Ù†Ù…ÛŒÚ©Ø±Ø¯Ù… Ù¾Ø±ÛŒÙ†Øª Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø§Ù†Ù‚Ø¯Ø± ØªÙ…ÛŒØ² Ø¯Ø±Ø¨ÛŒØ§Ø¯. Ø±Ù†Ú¯ Ù…Ø´Ú©ÛŒØ´ Ø®ÛŒÙ„ÛŒ Ø´ÛŒÚ©Ù‡."</p>
                <div class="review-meta">Ø®Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ: Ø¯ÙØªØ± Ú©Ø§Ø± | Ø·Ø±Ø­: Ù¾Ù„ÛŒÙ…Ø± Ù…Ø´Ú©ÛŒ</div>
            </div>
            <!-- Review 3 -->
            <div class="review-card">
                <p class="review-text">"Ù…Ù† Ø¹Ú©Ø³ Ø¨Ú†Ù‡â€ŒÙ… Ø±Ùˆ Ø²Ø¯Ù… Ø±ÙˆØ´ Ø¨Ø±Ø§ÛŒ Ø±ÙˆØ² Ù…Ø§Ø¯Ø±. Ø¨Ù‡ØªØ±ÛŒÙ† Ú©Ø§Ø¯ÙˆÛŒÛŒ Ø¨ÙˆØ¯ Ú©Ù‡ ØªØ§ Ø­Ø§Ù„Ø§ Ø¨Ù‡ Ù…Ø§Ø¯Ø±Ù… Ø¯Ø§Ø¯Ù…."</p>
                <div class="review-meta">Ø®Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ: Ù…Ø§Ø¯Ø± | Ø·Ø±Ø­: Ú†ÙˆØ¨ Ø±Ø§Ø´</div>
            </div>
             <!-- Review 4 -->
             <div class="review-card">
                <p class="review-text">"Ø§ÛŒØ¯Ù‡ ØµØ¯Ø§ Ø®ÛŒÙ„ÛŒ Ø¬Ø§Ù„Ø¨Ù‡. Ø¨Ø³ØªÙ‡ Ø¨Ù†Ø¯ÛŒ Ù‡Ù… Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯ Ùˆ Ø³Ø§Ù„Ù… Ø±Ø³ÛŒØ¯ Ø¯Ø³ØªÙ…."</p>
                <div class="review-meta">Ø®Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ: Ø¯ÙˆØ³Øª | Ø·Ø±Ø­: Ù‚Ø±Ù…Ø²</div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ -->
<section id="faq" class="faq-section">
    <div class="section-title" style="text-align:center; display:block">Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„</div>
    
    <details>
        <summary>Ú†Ø·ÙˆØ± Ø¹Ú©Ø³ Ù…Ù†Ø§Ø³Ø¨ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†Ù…ØŸ</summary>
        <div class="faq-content">Ø¨Ù‡ØªØ±ÛŒÙ† Ø¹Ú©Ø³ØŒ Ø¹Ú©Ø³ÛŒ Ø§Ø³Øª Ú©Ù‡ Ú©Ù†ØªØ±Ø§Ø³Øª Ø¨Ø§Ù„Ø§ÛŒÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯. Ø¹Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨Ø¹ÛŒ ÛŒØ§ Ø¹Ù…ÙˆØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ³ØªØ§Ø¯Ù‡ Ø¨Ù‡ØªØ± Ø¬ÙˆØ§Ø¨ Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯. Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ÛŒØ¯ØŒ Ø¯Ø± Ø§Ø¨Ø²Ø§Ø± Ø¨Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¹Ú©Ø³ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯.</div>
    </details>

    <details>
        <summary>Ú©ÛŒÙÛŒØª ØµØ¯Ø§ Ú†Ù‚Ø¯Ø± Ø¨Ø§ÛŒØ¯ Ø¨Ø§Ø´Ø¯ØŸ</summary>
        <div class="faq-content">ÙØ§ÛŒÙ„ MP3 Ø´Ù…Ø§ Ø¨Ø§ÛŒØ¯ Ø²ÛŒØ± Û³.Û¹ Ù…Ú¯Ø§Ø¨Ø§ÛŒØª Ø¨Ø§Ø´Ø¯. Ù…Ø§ Ú©ÛŒÙÛŒØª Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ù‡ÛŒÙ†Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….</div>
    </details>

    <details>
        <summary>Ø²Ù…Ø§Ù† Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ</summary>
        <div class="faq-content">Ù…Ø­ØµÙˆÙ„Ø§Øª Ú†ÙˆØ¨ÛŒ Û³ Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ Û² Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ Ø²Ù…Ø§Ù† Ù…ÛŒâ€ŒØ¨Ø±Ù†Ø¯ ØªØ§ Ø¨Ø§ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ø³Ø§Ø®ØªÙ‡ Ø´ÙˆÙ†Ø¯.</div>
    </details>
</section>

<!-- Loader Element -->
<div id="loader" class="loader" style="display:none">
    <div class="spinner"></div>
    <p style="margin-top:10px">Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ø±Ú¯Ø§Ù‡...</p>
</div>

<!-- ========================= LOGIC ========================= -->
<script>
// --- HERO ANIMATION ---
const words = ["Ø¹Ø´Ù‚Øª", "Ù…Ø§Ø¯Ø±Øª", "Ù‡Ù…Ú©Ø§Ø±Øª", "Ù¾Ø¯Ø±Øª", "Ø¯ÙˆØ³ØªØª", "Ø®ÙˆØ¯Øª"];
let wordIdx = 0;
const wordEl = document.getElementById('changingText');
setInterval(() => {
    wordEl.style.opacity = 0;
    setTimeout(() => {
        wordIdx = (wordIdx + 1) % words.length;
        wordEl.innerText = words[wordIdx];
        wordEl.style.opacity = 1;
    }, 300);
}, 2500);

// --- APP CONFIGURATION ---
const TARGET_WIDTH = 1181;
const TARGET_HEIGHT = 1051;

const VIEW_DEFINITIONS = [
  {
    id: 'v1', name: 'Ø§ÛŒØ³ØªØ§Ø¯Ù‡', isStatic: false,
    points: [{x: 431,y: 172}, {x: 786,y: 178}, {x: 782,y: 643}, {x: 438,y: 715}]
  },
  {
    id: 'v2', name: 'Ø®ÙˆØ§Ø¨ÛŒØ¯Ù‡', isStatic: false,
    points: [{x: 324,y: 360}, {x: 602,y: 224}, {x: 900,y: 386}, {x: 601,y: 610}]
  },
  {
    id: 'v3', name: 'Ù¾Ø´Øª Ù…Ø­ØµÙˆÙ„', isStatic: true, 
    points: [] // No warping points needed for static views
  },
  {
    id: 'v4', name: 'Ú©Ù†Ø§Ø± Ù…Ø­ØµÙˆÙ„', isStatic: true, 
    points: [] // No warping points needed for static views
  }
];

// Define Products and their specific images for each view
const PRODUCT_CONFIG = {
  "wood": {
    name: "Ú†ÙˆØ¨ Ø·Ø¨ÛŒØ¹ÛŒ",
    materials: {
      beech: { 
        name: "Ú†ÙˆØ¨ Ø±Ø§Ø´", 
        value: '#d1a377',
        // Images must match the order of VIEW_DEFINITIONS (v1, v2, v3)
        images: ['wood-beech-v1.png', 'wood-beech-v2.png', 'wood-beech-v3.png', 'wood-beech-v4.png'] 
      },
      walnut: { 
        name: "Ú†ÙˆØ¨ Ø§ÙØ±Ø§", 
        value: '#5d4037',
        // Example filenames - you need to have these files!
        images: ['wood-maple-v1.png', 'wood-maple-v2.png', 'wood-maple-v3.png', 'wood-maple-v4.png'] 
      }
    }
  },
  "3d-print": {
    name: "Ù¾Ø±ÛŒÙ†Øª Ø³Ù‡ Ø¨Ø¹Ø¯ÛŒ",
    materials: {
      black: { 
        name: "Ù…Ø´Ú©ÛŒ Ù…Ø§Øª", 
        value: '#333333',
        images: ['black-v1.png', 'black-v2.png', 'black-v3.png', 'black-v4.png']
      },
      blue: { 
        name: "Ø³Ø±Ù…Ù‡ Ø§ÛŒ", 
        value: '#3B3E79',
        images: ['blue-v1.png', 'blue-v2.png', 'blue-v3.png', 'blue-v4.png']
      },
      green: { 
        name: "Ø²ÛŒØªÙˆÙ†ÛŒ", 
        value: '#808000',
        images: ['green-v1.png', 'green-v2.png', 'green-v3.png', 'green-v4.png']
      },
      marble: { 
        name: "Ù…Ø±Ù…Ø±ÛŒ", 
        value: '#e3e0cd',
        images: ['marble-v1.png', 'marble-v2.png', 'marble-v3.png', 'marble-v4.png']
      }
    }
  }
};

// --- APP STATE ---
let state = {
  typeId: "wood",
  materialId: "beech",
  viewId: "v1",
  userImage: null,
  offset: { x: 0, y: 0 },
  scale: 100,
  rotation: 0,
  isDragging: false,
  dragStart: { x: 0, y: 0 },
  loadedImages: {}
};

// --- CORE FUNCTIONS ---
function initApp() {
    renderTypeOptions();
    loadMaterial(state.typeId, state.materialId);
}

function showLoader(show) {
    document.getElementById('loader').style.display = show ? 'flex' : 'none';
}

function loadMaterial(tid, mid) {
    showLoader(true);
    state.typeId = tid; 
    state.materialId = mid;
    renderMaterialOptions();
    
    // Update Label
    document.getElementById('matName').innerText = PRODUCT_CONFIG[tid].materials[mid].name;

    const paths = PRODUCT_CONFIG[tid].materials[mid].images;
    let loaded = 0, total = VIEW_DEFINITIONS.length;

    VIEW_DEFINITIONS.forEach((v, i) => {
        const img = new Image();
        img.src = paths[i];
        img.onload = () => {
            state.loadedImages[v.id] = img;
            loaded++;
            if(loaded===total) { showLoader(false); renderThumbnails(); renderMain(); }
        };
        img.onerror = () => { // Fallback for demo
            console.warn("Image not found:", paths[i]);
            loaded++;
            if(loaded===total) { showLoader(false); renderThumbnails(); renderMain(); }
        };
    });
}

// --- RENDERING ---
function createDesignBuffer() {
    const cv = document.createElement('canvas');
    cv.width = TARGET_WIDTH; cv.height = TARGET_HEIGHT;
    const ctx = cv.getContext('2d');
    
    ctx.fillStyle = '#fff';
    ctx.fillRect(0,0,TARGET_WIDTH,TARGET_HEIGHT);

    if(state.userImage) {
        ctx.save();
        ctx.translate(TARGET_WIDTH/2 + state.offset.x, TARGET_HEIGHT/2 + state.offset.y);
        ctx.rotate(state.rotation * Math.PI/180);
        const s = state.scale/100;
        ctx.scale(s,s);
        ctx.drawImage(state.userImage, -state.userImage.width/2, -state.userImage.height/2);
        ctx.restore();
    }
    return cv;
}

function renderMain() {
    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');
    const bg = state.loadedImages[state.viewId];
    if(!bg) return;

    canvas.width = bg.width; canvas.height = bg.height;
    const design = createDesignBuffer();
    const viewDef = VIEW_DEFINITIONS.find(v=>v.id===state.viewId);
    
    drawComposition(ctx, bg, design, viewDef);
}

function renderThumbnails() {
    const c = document.getElementById('thumbsContainer');
    c.innerHTML = '';
    const design = createDesignBuffer();

    VIEW_DEFINITIONS.forEach(v => {
        const div = document.createElement('div');
        div.className = `thumb-item ${state.viewId===v.id ? 'active':''}`;
        div.onclick = () => { state.viewId = v.id; renderThumbnails(); renderMain(); checkTools(); };
        
        const cv = document.createElement('canvas');
        const bg = state.loadedImages[v.id];
        if(bg) {
            cv.width = 150; cv.height = 150 * (bg.height/bg.width);
            drawComposition(cv.getContext('2d'), bg, design, v, true);
        }
        div.appendChild(cv);
        c.appendChild(div);
    });
}

function drawComposition(ctx, bg, design, viewDef, isThumb=false) {
    ctx.drawImage(bg, 0, 0, ctx.canvas.width, ctx.canvas.height);
    
    if(state.userImage && !viewDef.isStatic) {
        const sx = ctx.canvas.width / bg.width;
        const sy = ctx.canvas.height / bg.height;
        const points = viewDef.points.map(p => ({x:p.x*sx, y:p.y*sy}));
        warpImage(ctx, design, points, isThumb?10:30);
    }
}

// Basic Perspective Warp (same as before)
function warpImage(ctx, src, p, steps) {
    const w = src.width, h = src.height;
    for(let i=0; i<steps; i++) {
        const t1 = i/steps, t2 = (i+1)/steps;
        const p1 = lerp(p[0],p[3],t1), p2 = lerp(p[1],p[2],t1);
        const p3 = lerp(p[0],p[3],t2), p4 = lerp(p[1],p[2],t2);
        ctx.save();
        ctx.beginPath(); ctx.moveTo(p1.x,p1.y); ctx.lineTo(p2.x,p2.y); ctx.lineTo(p4.x,p4.y); ctx.lineTo(p3.x,p3.y);
        ctx.closePath(); ctx.clip();
        const dx = p2.x-p1.x, dy = p2.y-p1.y;
        const dist = Math.sqrt(dx*dx+dy*dy);
        const angle = Math.atan2(dy,dx);
        ctx.translate(p1.x,p1.y); ctx.rotate(angle);
        ctx.drawImage(src, 0, h*t1, w, h/steps, 0, 0, dist, Math.sqrt(Math.pow(p1.x-p3.x,2)+Math.pow(p1.y-p3.y,2))+2);
        ctx.restore();
    }
}
function lerp(a,b,t){return{x:a.x+(b.x-a.x)*t,y:a.y+(b.y-a.y)*t}}

// --- UI INTERACTIONS ---
function renderTypeOptions() {
    const c = document.getElementById('typeContainer'); c.innerHTML='';
    for(let t in PRODUCT_CONFIG) {
        let chip = document.createElement('div');
        chip.className = `chip ${state.typeId===t?'active':''}`;
        chip.innerText = PRODUCT_CONFIG[t].name;
        chip.onclick = () => loadMaterial(t, Object.keys(PRODUCT_CONFIG[t].materials)[0]);
        c.appendChild(chip);
    }
}

function renderMaterialOptions() {
    const c = document.getElementById('materialContainer'); c.innerHTML='';
    const mats = PRODUCT_CONFIG[state.typeId].materials;
    for(let m in mats) {
        let dot = document.createElement('div');
        dot.className = `color-dot ${state.materialId===m?'active':''}`;
        dot.style.background = mats[m].value;
        dot.title = mats[m].name;
        dot.onclick = () => loadMaterial(state.typeId, m);
        c.appendChild(dot);
    }
}

// Upload & Tools
const imgDrop = document.getElementById('imgDrop');
const imgInp = document.getElementById('imgInput');
imgDrop.onclick = () => imgInp.click();
imgInp.onchange = e => {
    if(e.target.files[0]) {
        const r = new FileReader();
        r.onload = ev => {
            state.userImage = new Image();
            state.userImage.onload = () => {
                state.offset={x:0,y:0}; state.scale=100; state.rotation=0;
                imgDrop.classList.add('done'); imgDrop.querySelector('div').innerText="âœ… ØªØµÙˆÛŒØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯";
                checkTools(); renderMain(); renderThumbnails();
                document.getElementById('buyBtn').disabled = false;
            };
            state.userImage.src = ev.target.result;
        };
        r.readAsDataURL(e.target.files[0]);
    }
};

function checkTools() {
    const tools = document.getElementById('tools');
    const v = VIEW_DEFINITIONS.find(x=>x.id===state.viewId);
    if(state.userImage && !v.isStatic) {
        tools.style.display = 'flex';
        tools.style.opacity = '1';
        tools.style.pointerEvents = 'all';
    } else {
        tools.style.opacity = '0.3';
        tools.style.pointerEvents = 'none';
    }
}

// Canvas Drag
const cvs = document.getElementById('mainCanvas');
cvs.onmousedown = e => { if(state.userImage) { state.isDragging=true; state.dragStart={x:e.offsetX,y:e.offsetY}; } };
cvs.onmousemove = e => { 
    if(state.isDragging) {
        state.offset.x += e.offsetX - state.dragStart.x;
        state.offset.y += e.offsetY - state.dragStart.y;
        state.dragStart={x:e.offsetX,y:e.offsetY};
        renderMain();
    }
};
window.onmouseup = () => { if(state.isDragging) { state.isDragging=false; renderThumbnails(); } }; // Re-render thumbs on drop

// Audio
document.getElementById('audioDrop').onclick = () => document.getElementById('audioInput').click();
document.getElementById('audioInput').onchange = e => {
    const f = e.target.files[0];
    if(f && f.size < 4000000) {
        document.getElementById('audioDrop').classList.add('done');
        document.getElementById('audioLabel').innerText = f.name;
    } else alert('Ø­Ø¬Ù… ÙØ§ÛŒÙ„ Ø¨Ø§ÛŒØ¯ Ú©Ù…ØªØ± Ø§Ø² Û´ Ù…Ú¯Ø§Ø¨Ø§ÛŒØª Ø¨Ø§Ø´Ø¯');
};

// Tools Listeners
document.getElementById('rotBtn').onclick = () => { state.rotation = (state.rotation+90)%360; renderMain(); renderThumbnails(); };
document.getElementById('zoomRange').oninput = e => { state.scale = parseInt(e.target.value); renderMain(); }; // Realtime main
document.getElementById('zoomRange').onchange = () => renderThumbnails(); // Thumbs on release

// Buy
document.getElementById('buyBtn').onclick = () => {
    const link = document.createElement('a');
    link.download = 'Gift_Design.jpg';
    link.href = createDesignBuffer().toDataURL('image/jpeg', 0.9);
    link.click();
};

// --- AI LOGIC (THE "WIZARD") ---
function applyAiSuggestion() {
    const who = document.getElementById('aiWho').value;
    const vibe = document.getElementById('aiVibe').value;
    
    if(!who || !vibe) { alert("Ù„Ø·ÙØ§ Ù‡Ø± Ø¯Ùˆ Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯!"); return; }
    
    // Logic Table
    let t = 'wood', m = 'beech';
    
    if(vibe === 'minimal' || who === 'friend') {
        t = '3d-print'; m = 'black';
    } else if (vibe === 'luxury' || who === 'colleague') {
        t = 'wood'; m = 'walnut';
    } else if (vibe === 'nature') {
        t = 'wood'; m = 'beech';
    }
    
    // Apply
    loadMaterial(t, m);
    
    // Smooth Scroll to Customizer
    document.getElementById('customizer').scrollIntoView({ behavior: 'smooth' });
}

// Start
initApp();

</script>
</body>
</html>
